{
  "id": "d9ef9ccd-c40e-424d-98f9-445bdb2746d6",
  "prefix": "snp_duzeltmecikis",
  "description": "",
  "body": "Declare @SPOlcuBirimi Varchar(100), @StokAmbarID int\n\tDeclare c Cursor Local For\n\t\t\t SELECT SA.StokAmbarID FROM  IT06_StokAmbar SA\n--INNER JOIN IT08_SeriM SM On SM.SeriID = SA.SeriID\n--INNER JOIN IT08_TSeriM TSM On TSM.GirenSeriID = SM.SeriID\n Where SA.AmbarID = 68 And SA.AddDate < GETDATE()-10 --and SM.Durumu = 2\nOrder By SA.AddDate Desc\n\n\t\t\t\t\t\t\t\t\t\t  ----And gcm.AddDate < '2019-09-18 00:00:00' --and SA.AddDate < '2019-09-08 07:51:59.480' \n\t\t\t\t\t\t\t\t\t\t  --Order By ABS(DATEDIFF(Day,sa.AddDate,GCM.AddDate)) desc, A.AmbarID desc,SA.AddDate Desc\t\t\n\tOpen c\n\tFetch Next From c Into @StokAmbarID\n\tWhile @@FETCH_STATUS = 0 Begin\n\t\n\n\nExec PSP06_StokAmbar_DuzeltmeGirisVeCikis @StokAmbarID = @StokAmbarID, @SPMiktar_Mt = 0, @SPMiktar_Kg = 0, @SPMiktar_Ad = 0, @SPDuzeltmeGirisCikisMiktarTipID = 1,\n                                          @SPDuzeltmeGirisCikisMiktarTipAdi = '', @SPOlcuBirimi = @SPOlcuBirimi Output, @SPMt = 0, @SPKg = 0, @SPAd = 0,\n                                          @SPAmbarMiktar_Mt = Null, @SPAmbarMiktar_Kg = Null, @SPAmbarMiktar_Ad = 0, @SPDuzeltmeGirisMiktar_Mt = Null,\n                                          @SPDuzeltmeGirisMiktar_Kg = Null, @SPDuzeltmeGirisMiktar_Ad = 0, @SPDuzeltmeCikisMiktar_Mt = Null,\n                                          @SPDuzeltmeCikisMiktar_Kg = Null, @SPDuzeltmeCikisMiktar_Ad = 0\t\t\n\t\n\t\tFetch Next From c Into @StokAmbarID\n\tEnd\n\tClose c\n\tDeallocate c\t\t\t\t\n\t\n\t\t\n----şimdi top sarım ambarından hangileri düzeltme  çıkış yapılacak. benim şu anda önümde bu partiler var diyecek. o partilerin barkodlarına dokunmayacağız. geriye kalan partilerin barkodlarını düzeltme çıkış ile çıkacağız. \n----69\tM002\tTOP SARIM\n--SELECT * FROM  IT06_StokAmbar SA Where Sa.AmbarID = 69 And SA.IsEmriNo In (\n--)"
}