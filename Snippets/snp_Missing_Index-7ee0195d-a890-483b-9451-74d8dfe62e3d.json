{
  "id": "7ee0195d-a890-483b-9451-74d8dfe62e3d",
  "prefix": "snp_Missing_Index",
  "description": "",
  "body": "Declare @TabloAdi varchar(200)\n\n\nSet @TabloAdi = '$CURSOR$'\n-- Missing Index Script\n-- Original Author: Pinal Dave (C) 2011\nSelect Top 25\n        dm_mid.database_id As DatabaseID, dm_migs.avg_user_impact * (dm_migs.user_seeks + dm_migs.user_scans) Avg_Estimated_Impact,\n        dm_migs.last_user_seek As Last_User_Seek, Object_Name(dm_mid.object_id, dm_mid.database_id) As [TableName],\n        'CREATE INDEX [IX_' + Object_Name(dm_mid.object_id, dm_mid.database_id) + '_' + Replace(Replace(Replace(IsNull(dm_mid.equality_columns, ''), ', ', '_'),\n                                                                                                        '[', ''), ']', '') + Case When dm_mid.equality_columns Is Not Null And dm_mid.inequality_columns Is Not Null\n                                                                                                                                  Then '_'\n                                                                                                                                  Else ''\n                                                                                                                             End + Replace(Replace(Replace(IsNull(dm_mid.inequality_columns,\n                                                                                                                                                ''), ', ', '_'),\n                                                                                                                                                '[', ''), ']',\n                                                                                                                                           '') + ']' + ' ON ' + dm_mid.statement + ' (' + IsNull(dm_mid.equality_columns,\n                                                                                                                                                '') + Case\n                                                                                                                                                When dm_mid.equality_columns Is Not Null And dm_mid.inequality_columns Is Not Null\n                                                                                                                                                Then ','\n                                                                                                                                                Else ''\n                                                                                                                                                End + IsNull(dm_mid.inequality_columns,\n                                                                                                                                                '') + ')' + IsNull(' INCLUDE (' + dm_mid.included_columns + ')',\n                                                                                                                                                '') As Create_Statement\nFrom    sys.dm_db_missing_index_groups dm_mig\n        Inner Join sys.dm_db_missing_index_group_stats dm_migs On dm_migs.group_handle = dm_mig.index_group_handle\n        Inner Join sys.dm_db_missing_index_details dm_mid On dm_mig.index_handle = dm_mid.index_handle\nWhere   dm_mid.database_id = Db_Id()\n\t\tAnd Object_Name(dm_mid.object_id, dm_mid.database_id) = @TabloAdi\nOrder By Avg_Estimated_Impact Desc\n\t\nGo"
}