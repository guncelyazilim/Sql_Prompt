{
  "id": "9359a1f1-4aa7-4934-b443-fd5673181dfb",
  "prefix": "snp_KumasKazanKapasite2",
  "description": "",
  "body": "Declare @TipID int\r\nDeclare csnp Cursor Local For Select    S.TipID From   [Sayfa2$] S\r\nOpen csnp\r\nFetch Next From csnp\r\nInto @TipID\r\nWhile @@FETCH_STATUS = 0 Begin\r\n\r\n    If Not Exists (Select   * From  IT55_KumasBoyaKapasite KBK Where KBK.KumasKaliteID = @TipID And KBK.MakinaGrupID = 205) Begin\r\n        Insert Into IT55_KumasBoyaKapasite (KumasKaliteID, MakinaGrupID, MinKapasiteKg, MaksKapasiteKg, AktarimTuru)\r\n        Select      KKA.KumasKaliteID, 205 MakineGrupID, 1200 * MAX(KKAKTB.MamulGrM) / 1000.0, 2400 * MAX(KKAKTB.MamulGrM) / 1000.0, 'TeorikHesap' AktarimTuru\r\n        From        IT01_KumasKaliteAdlari KKA\r\n                    Left Outer Join PV01_KumasKaliteAdlari_KumasTeknikBilgileri KKAKTB On KKAKTB.KumasKaliteID = KKA.KumasKaliteID\r\n        Where       KKA.KumasKaliteID = @TipID\r\n        Group By    KKA.KumasKaliteID\r\n        Order By    KKA.KumasKaliteID, MakineGrupID\r\n\r\n    End\r\n\r\n    If Not Exists (Select   * From  IT55_KumasBoyaKapasite KBK Where KBK.KumasKaliteID = @TipID And KBK.MakinaGrupID = 150) Begin\r\n        Insert Into IT55_KumasBoyaKapasite (KumasKaliteID, MinKapasiteKg, MaksKapasiteKg, MakinaGrupID, AktarimTuru)\r\n        Select      KKA.KumasKaliteID, 500 * MAX(KKAKTB.MamulGrM) / 1000.0 HesaplananMinKG, 1000 * MAX(KKAKTB.MamulGrM) / 1000.0 HesaplananMinKG, 150 MakineGrupID,\r\n                    'TeorikHesap' AktarimTuru\r\n        From        IT01_KumasKaliteAdlari KKA\r\n                    Left Outer Join PV01_KumasKaliteAdlari_KumasTeknikBilgileri KKAKTB On KKAKTB.KumasKaliteID = KKA.KumasKaliteID\r\n        Where       KKA.KumasKaliteID = @TipID\r\n        Group By    KKA.KumasKaliteID\r\n        Order By    KKA.KumasKaliteID, MakineGrupID\r\n\r\n    End\r\n    Fetch Next From csnp\r\n    Into @TipID\r\nEnd\r\nClose csnp"
}