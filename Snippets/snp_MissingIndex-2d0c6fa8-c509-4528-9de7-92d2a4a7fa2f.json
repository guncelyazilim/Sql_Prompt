{
  "id": "2d0c6fa8-c509-4528-9de7-92d2a4a7fa2f",
  "prefix": "snp_MissingIndex",
  "description": "",
  "body": "Select      CONVERT(Varchar(30), GETDATE(), 126) runtime, mig.index_group_handle, mid.index_handle,\r\n            CONVERT(Decimal(28, 1), migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans)) improvement_measure,\r\n            'CREATE INDEX missing_index_' + CONVERT(Varchar, mig.index_group_handle) + '_' + CONVERT(Varchar, mid.index_handle) + ' ON ' + mid.statement + ' ('\r\n            + ISNULL(mid.equality_columns, '') + Case When mid.equality_columns Is Not Null And mid.inequality_columns Is Not Null Then ',' Else '' End\r\n            + ISNULL(mid.inequality_columns, '') + ')' + ISNULL(' INCLUDE (' + mid.included_columns + ')', '') create_index_statement, migs.*, mid.database_id,\r\n            mid.object_id\r\nFrom        sys.dm_db_missing_index_groups mig\r\n            Inner Join sys.dm_db_missing_index_group_stats migs On migs.group_handle = mig.index_group_handle\r\n            Inner Join sys.dm_db_missing_index_details mid On mig.index_handle = mid.index_handle\r\nWhere       CONVERT(Decimal(28, 1), migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans)) > 10\r\nOrder By    migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) Desc\r\n"
}