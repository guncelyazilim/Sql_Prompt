{
  "id": "ba9bc43a-1e42-4106-99fe-b40cb8313113",
  "prefix": "snp_findITObject",
  "description": "",
  "body": "Declare @ITObjectName Varchar(100), @ITObjectID int\nSet @ITObjectID = Null\nIf @ITObjectID Is Null Begin\n  Set @ITObjectName = 'PV06_ST_Hizmet'\n  Set @ITObjectID = (Select OM.ITObjectID From IT15_ObjectsM OM Where OM.ITObjectName = @ITObjectName)\nEnd\nIf @ITObjectID Is Null Begin Raiserror('Böyle bir nesne yok',16,1) Return end\nSELECT 'SQL Dependencies', referencing_entity_name\nFROM sys.dm_sql_referencing_entities(@ITObjectName, 'Object')\nUnion\nSELECT 'SQL Dependencies', referencing_entity_name\nFROM sys.dm_sql_referencing_entities('dbo.'+@ITObjectName, 'Object')\n\nSelect 'Ekran' TUR, S.ScreenID, S.ScreenCaption, S.ITObjectID, S.ITObjectID2\nFrom IT15_Screens S\nWhere S.ITObjectID = @ITObjectID Or S.ITObjectID2 = @ITObjectID\nSelect 'Veri İşlemi' TUR, OM.ITObjectName, OVI.VeriIslemAdi, OVI.SPITObjectID, OVI.DSITObjectID, OVI.DSITObjectID2\nFrom IT15_ObjectsVeriIslemleri OVI\n  Inner Join IT15_ObjectsM OM On OM.ITObjectID = OVI.ITObjectID\nWhere OVI.SPITObjectID = @ITObjectID Or OVI.DSITObjectID = @ITObjectID Or OVI.DSITObjectID2 = @ITObjectID\nSelect 'LOOKUP DATASET', OM.ITObjectName, OD.FieldName, OD.FieldCaption, OD.LDataSet\nFrom IT15_ObjectsD OD\n  Inner Join IT15_ObjectsM OM On OM.ITObjectID = OD.ITObjectID\nWhere OD.LDataSet = @ITObjectName\nSelect 'SEÇİM AFTER/BEF SP', OM.ITObjectName, OD.FieldName, OD.ITSPSecim, OD.ITSPSecimAfter\nFrom IT15_ObjectsD OD\n  Inner Join IT15_ObjectsM OM On OM.ITObjectID = OD.ITObjectID\nWhere OD.ITSPSecimAfter = @ITObjectName Or OD.ITSPSecim = @ITObjectName\nSelect 'BEF SP', OM.ITObjectName, OM.ITObjectAlias From IT15_ObjectsM OM Where OM.BefITObjectID = @ITObjectID\n \nSELECT 'ANALİZ TABSHEET', M.AnalizDataID, M.AnalizAdi\nFROM dbo.IT15_AnalizDataD D\nINNER JOIN dbo.IT15_AnalizDataM M ON M.AnalizDataID = D.AnalizDataID\nWHERE D.TSDatasetID = @ITObjectID\n \nSELECT 'ANALİZ TABSHEET', M.AnalizDataID, M.AnalizAdi\nFROM dbo.IT15_AnalizDataD D\nINNER JOIN dbo.IT15_AnalizDataM M ON M.AnalizDataID = D.AnalizDataID\nWHERE D.TSDetayDatasetID = @ITObjectID\n \n \nSelect 'Ekran' TUR, S.ScreenID, S.ScreenCaption, S.ITObjectID, S.ITObjectID2\nFrom IT15_Screens S\nINNER JOIN dbo.IT15_AnalizDataM M ON M.AnalizDataID = S.AnalizDataID\nINNER JOIN dbo.IT15_AnalizDataD D ON D.AnalizDataID = M.AnalizDataID\nWHERE D.TSDatasetID = @ITObjectID\n \nSelect 'Ekran' TUR, S.ScreenID, S.ScreenCaption, S.ITObjectID, S.ITObjectID2\nFrom IT15_Screens S\nINNER JOIN dbo.IT15_AnalizDataM M ON M.AnalizDataID = S.AnalizDataID\nINNER JOIN dbo.IT15_AnalizDataD D ON D.AnalizDataID = M.AnalizDataID\nWHERE D.TSDetayDatasetID = @ITObjectID"
}